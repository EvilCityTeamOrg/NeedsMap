<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NeedsMap</title>
    <link rel="stylesheet" type="text/css" href="../style.css" />
    <link rel="manifest" href="../app.webmanifest" />
</head>

<body>
    <div class="header">
        <h1>NeedsMap</h1>
        <div>
            <a class="invisible_link" href="../login">
                <button>войти</button>
            </a>
            <a href="../register">
                <button>зарегистрироваться</button>
            </a>
        </div>
        <button id="d">Скачать приложение</button>
    </div>

    <script>
        let defferedPrompt;
        const addbtn = document.getElementById('d');

        window.addEventListener('beforeinstallprompt', event => {
            event.preventDefault();
            defferedPrompt = event
            addbtn.style.display = 'block';
        });

        addbtn.addEventListener('click', event => {
            defferedPrompt.prompt();

            defferedPrompt.userChoice.then(choice => {
                if (choice.outcome === 'accepted') {
                    console.log('user accepted the prompt')
                }
                defferedPrompt = null;
            })
        })
    </script>
</body>

</html>